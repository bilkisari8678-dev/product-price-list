<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Owen Caffe</title>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
    
    <style>
        body {
            background: #0a0a0a;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            padding: 20px;
        }
        h1 { color: #00ffff; text-align: center; text-shadow: 0 0 10px #00ffff; }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #111;
        }
        
        /* Header tabel berwarna Cyan sesuai gambar */
        .admin-table th {
            background: #00ffff;
            color: black;
            padding: 12px;
            text-align: left;
            text-transform: uppercase;
            font-size: 14px;
        }
        
        .admin-table td {
            padding: 12px;
            border-bottom: 1px solid #222;
            font-size: 14px;
        }

        /* Styling Nama Asal agar menonjol */
        .origin-text {
            color: #ffea00;
            font-weight: bold;
            display: block;
            font-size: 12px;
        }

        .btn-selesai {
            background: #ff4444;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-selesai:hover { background: #cc0000; }
    </style>
</head>
<body>

    <h1>üõ†Ô∏è MONITORING PESANAN - ADMIN</h1>

    <table class="admin-table">
        <thead>
            <tr>
                <th>Waktu</th>
                <th>Pemesan & Asal</th> <th>Produk</th>
                <th>Qty</th>
                <th>Total</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody id="orderTableBody">
            </tbody>
    </table>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD8d5HgUxJhU3qy5qsb-j2TwFWam-ASjuI",
            authDomain: "owen-caffe.firebaseapp.com",
            databaseURL: "https://owen-caffe-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "owen-caffe",
            storageBucket: "owen-caffe.firebasestorage.app",
            appId: "1:374030985787:web:1f9ddf8ecf3d8d1cb58a1e"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Mendengarkan data pesanan secara real-time
        database.ref('pesanan/').on('value', (snapshot) => {
            const data = snapshot.val();
            const tableBody = document.getElementById('orderTableBody');
            tableBody.innerHTML = "";
            
            if (data) {
                Object.keys(data).reverse().forEach((key) => {
                    const p = data[key];
                    tableBody.innerHTML += `
                        <tr>
                            <td>${p.waktu || '-'}</td>
                            <td>
                                <b>${p.nama}</b>
                                <span class="origin-text">üìç ${p.asal || 'Tanpa Asal'}</span> </td>
                            <td>${p.produk}</td>
                            <td>${p.jumlah}</td>
                            <td>B ${p.totalHarga}</td>
                            <td><button class="btn-selesai" onclick="hapusPesanan('${key}')">Selesai</button></td>
                        </tr>
                    `;
                });
            } else {
                tableBody.innerHTML = '<tr><td colspan="6" style="text-align:center;">Belum ada pesanan masuk.</td></tr>';
            }
        });

        function hapusPesanan(key) {
            if(confirm("Tandai pesanan ini sebagai selesai?")) {
                database.ref('pesanan/' + key).remove();
            }
        }
    </script>
</body>
</html>
